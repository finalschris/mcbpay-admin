var assert = require('assert');
var Heartbeat = require('./heartbeat.js');

var emitter = Heartbeat.start({
    nodes: [
      {address: 'localhost', port: 12345}
    ],
  }, function (emitter) {
    emitter.on('delay', function(delay) {
      console.log('delay captured');
      assert.equal(delay.rinfo.address, 'localhost');
      assert.notEqual(delay.delay, 0);
      process.exit(0);
    });
  }
);
